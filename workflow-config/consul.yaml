jobs:
  ## A special configuration section for generating jobs for installing previous releases on the current version
  - purpose: automation
    name: "Clean [${release_version}], Upgrade to [${service_branch}]"
    install_version: "${release_version}"
    template: "templates/consul-service/consul_clean_all_on_sc.yml"
    upgrade_version: "${service_branch}"
    upgrade_template: "templates/consul-service/consul_clean_all_on_sc.yml"
    sequence: upgrade
    restricted: false
    artifact_name: "Clean_${release_version}_Upgrade_CURRENT"
  ## ===============================================================================
  - name: "Clean [${service_branch}] restricted"
    install_version: "${service_branch}"
    template: "templates/consul-service/consul_clean_all_on_sc_restricted.yml"
    sequence: install
    restricted: true
    artifact_name: "Clean_CURRENT_Restricted"

  - name: "Clean [${service_branch}] Full-AT Ports-specifying Custom-labels"
    install_version: "${service_branch}"
    template: "templates/consul-service/consul_clean_all_on_sc_full_at.yml"
    sequence: install
    restricted: false
    artifact_name: "Clean_CURRENT_Full-AT"

  - name: "Clean [${service_branch}] S3 TLS"
    install_version: "${service_branch}"
    template: "templates/consul-service/consul_clean_all_on_sc_drd_s3_tls.yml"
    sequence: install
    restricted: false
    backend: s3-tls
    artifact_name: "Clean_CURRENT_S3_TLS"

  - name: "Clean [${service_branch}]. Upgrade [${service_branch}] Diff Params"
    install_version: "${service_branch}"
    template: "templates/consul-service/consul_clean_all_on_sc.yml"
    upgrade_version: "${service_branch}"
    upgrade_template: "templates/consul-service/consul_clean_all_on_sc_updated.yml"
    sequence: upgrade
    restricted: false
    artifact_name: "Clean_CURRENT_Upgrade_CURRENT_Diff_Params"

  - name: "Clean [${service_branch}] W/O Components. Upgrade [${service_branch}] All Components S3"
    install_version: "${service_branch}"
    template: "templates/consul-service/consul_clean_on_sc_without_components.yml"
    upgrade_version: "${service_branch}"
    upgrade_template: "templates/consul-service/consul_clean_all_on_sc_drd_s3.yml"
    sequence: upgrade
    restricted: false
    backend: s3
    artifact_name: "Clean_CURRENT_WO_Components.Upgrade_CURRENT_All_Components_S3"

  - purpose: automation
    name: "Clean [${release_version}] Restricted. Upgrade To [${service_branch}] Restricted"
    install_version: "${release_version}"
    template: "templates/consul-service/consul_clean_all_on_sc_restricted.yml"
    upgrade_version: "${service_branch}"
    upgrade_template: "templates/consul-service/consul_clean_all_on_sc_restricted.yml"
    sequence: upgrade
    restricted: true
    artifact_name: "Clean_PREVIOUS_Restricted.Upgrade_CURRENT_Restricted"
